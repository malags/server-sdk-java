/**
 * This file was auto-generated by Fern from our API Definition.
 */
package com.vapi.api.types;

import com.fasterxml.jackson.annotation.JsonAnyGetter;
import com.fasterxml.jackson.annotation.JsonAnySetter;
import com.fasterxml.jackson.annotation.JsonIgnoreProperties;
import com.fasterxml.jackson.annotation.JsonInclude;
import com.fasterxml.jackson.annotation.JsonProperty;
import com.fasterxml.jackson.annotation.JsonSetter;
import com.fasterxml.jackson.annotation.Nulls;
import com.fasterxml.jackson.databind.annotation.JsonDeserialize;
import com.vapi.api.core.ObjectMappers;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import java.util.Objects;
import java.util.Optional;

@JsonInclude(JsonInclude.Include.NON_ABSENT)
@JsonDeserialize(builder = TwilioVoicemailDetectionPlan.Builder.class)
public final class TwilioVoicemailDetectionPlan {
    private final Optional<List<TwilioVoicemailDetectionPlanVoicemailDetectionTypesItem>> voicemailDetectionTypes;

    private final Optional<Boolean> enabled;

    private final Optional<Double> machineDetectionTimeout;

    private final Optional<Double> machineDetectionSpeechThreshold;

    private final Optional<Double> machineDetectionSpeechEndThreshold;

    private final Optional<Double> machineDetectionSilenceTimeout;

    private final Map<String, Object> additionalProperties;

    private TwilioVoicemailDetectionPlan(
            Optional<List<TwilioVoicemailDetectionPlanVoicemailDetectionTypesItem>> voicemailDetectionTypes,
            Optional<Boolean> enabled,
            Optional<Double> machineDetectionTimeout,
            Optional<Double> machineDetectionSpeechThreshold,
            Optional<Double> machineDetectionSpeechEndThreshold,
            Optional<Double> machineDetectionSilenceTimeout,
            Map<String, Object> additionalProperties) {
        this.voicemailDetectionTypes = voicemailDetectionTypes;
        this.enabled = enabled;
        this.machineDetectionTimeout = machineDetectionTimeout;
        this.machineDetectionSpeechThreshold = machineDetectionSpeechThreshold;
        this.machineDetectionSpeechEndThreshold = machineDetectionSpeechEndThreshold;
        this.machineDetectionSilenceTimeout = machineDetectionSilenceTimeout;
        this.additionalProperties = additionalProperties;
    }

    /**
     * @return These are the AMD messages from Twilio that are considered as voicemail. Default is ['machine_end_beep', 'machine_end_silence'].
     * <p>@default {Array} ['machine_end_beep', 'machine_end_silence']</p>
     */
    @JsonProperty("voicemailDetectionTypes")
    public Optional<List<TwilioVoicemailDetectionPlanVoicemailDetectionTypesItem>> getVoicemailDetectionTypes() {
        return voicemailDetectionTypes;
    }

    /**
     * @return This sets whether the assistant should detect voicemail. Defaults to true.
     * <p>@default true</p>
     */
    @JsonProperty("enabled")
    public Optional<Boolean> getEnabled() {
        return enabled;
    }

    /**
     * @return The number of seconds that Twilio should attempt to perform answering machine detection before timing out and returning AnsweredBy as unknown. Default is 30 seconds.
     * <p>Increasing this value will provide the engine more time to make a determination. This can be useful when DetectMessageEnd is provided in the MachineDetection parameter and there is an expectation of long answering machine greetings that can exceed 30 seconds.</p>
     * <p>Decreasing this value will reduce the amount of time the engine has to make a determination. This can be particularly useful when the Enable option is provided in the MachineDetection parameter and you want to limit the time for initial detection.</p>
     * <p>Check the <a href="https://www.twilio.com/docs/voice/answering-machine-detection#optional-api-tuning-parameters">Twilio docs</a> for more info.</p>
     * <p>@default 30</p>
     */
    @JsonProperty("machineDetectionTimeout")
    public Optional<Double> getMachineDetectionTimeout() {
        return machineDetectionTimeout;
    }

    /**
     * @return The number of milliseconds that is used as the measuring stick for the length of the speech activity. Durations lower than this value will be interpreted as a human, longer as a machine. Default is 2400 milliseconds.
     * <p>Increasing this value will reduce the chance of a False Machine (detected machine, actually human) for a long human greeting (e.g., a business greeting) but increase the time it takes to detect a machine.</p>
     * <p>Decreasing this value will reduce the chances of a False Human (detected human, actually machine) for short voicemail greetings. The value of this parameter may need to be reduced by more than 1000ms to detect very short voicemail greetings. A reduction of that significance can result in increased False Machine detections. Adjusting the MachineDetectionSpeechEndThreshold is likely the better approach for short voicemails. Decreasing MachineDetectionSpeechThreshold will also reduce the time it takes to detect a machine.</p>
     * <p>Check the <a href="https://www.twilio.com/docs/voice/answering-machine-detection#optional-api-tuning-parameters">Twilio docs</a> for more info.</p>
     * <p>@default 2400</p>
     */
    @JsonProperty("machineDetectionSpeechThreshold")
    public Optional<Double> getMachineDetectionSpeechThreshold() {
        return machineDetectionSpeechThreshold;
    }

    /**
     * @return The number of milliseconds of silence after speech activity at which point the speech activity is considered complete. Default is 1200 milliseconds.
     * <p>Increasing this value will typically be used to better address the short voicemail greeting scenarios. For short voicemails, there is typically 1000-2000ms of audio followed by 1200-2400ms of silence and then additional audio before the beep. Increasing the MachineDetectionSpeechEndThreshold to ~2500ms will treat the 1200-2400ms of silence as a gap in the greeting but not the end of the greeting and will result in a machine detection. The downsides of such a change include:</p>
     * <ul>
     * <li>Increasing the delay for human detection by the amount you increase this parameter, e.g., a change of 1200ms to 2500ms increases human detection delay by 1300ms.</li>
     * <li>Cases where a human has two utterances separated by a period of silence (e.g. a &quot;Hello&quot;, then 2000ms of silence, and another &quot;Hello&quot;) may be interpreted as a machine.</li>
     * </ul>
     * <p>Decreasing this value will result in faster human detection. The consequence is that it can lead to increased False Human (detected human, actually machine) detections because a silence gap in a voicemail greeting (not necessarily just in short voicemail scenarios) can be incorrectly interpreted as the end of speech.</p>
     * <p>Check the <a href="https://www.twilio.com/docs/voice/answering-machine-detection#optional-api-tuning-parameters">Twilio docs</a> for more info.</p>
     * <p>@default 1200</p>
     */
    @JsonProperty("machineDetectionSpeechEndThreshold")
    public Optional<Double> getMachineDetectionSpeechEndThreshold() {
        return machineDetectionSpeechEndThreshold;
    }

    /**
     * @return The number of milliseconds of initial silence after which an unknown AnsweredBy result will be returned. Default is 5000 milliseconds.
     * <p>Increasing this value will result in waiting for a longer period of initial silence before returning an 'unknown' AMD result.</p>
     * <p>Decreasing this value will result in waiting for a shorter period of initial silence before returning an 'unknown' AMD result.</p>
     * <p>Check the <a href="https://www.twilio.com/docs/voice/answering-machine-detection#optional-api-tuning-parameters">Twilio docs</a> for more info.</p>
     * <p>@default 5000</p>
     */
    @JsonProperty("machineDetectionSilenceTimeout")
    public Optional<Double> getMachineDetectionSilenceTimeout() {
        return machineDetectionSilenceTimeout;
    }

    @java.lang.Override
    public boolean equals(Object other) {
        if (this == other) return true;
        return other instanceof TwilioVoicemailDetectionPlan && equalTo((TwilioVoicemailDetectionPlan) other);
    }

    @JsonAnyGetter
    public Map<String, Object> getAdditionalProperties() {
        return this.additionalProperties;
    }

    private boolean equalTo(TwilioVoicemailDetectionPlan other) {
        return voicemailDetectionTypes.equals(other.voicemailDetectionTypes)
                && enabled.equals(other.enabled)
                && machineDetectionTimeout.equals(other.machineDetectionTimeout)
                && machineDetectionSpeechThreshold.equals(other.machineDetectionSpeechThreshold)
                && machineDetectionSpeechEndThreshold.equals(other.machineDetectionSpeechEndThreshold)
                && machineDetectionSilenceTimeout.equals(other.machineDetectionSilenceTimeout);
    }

    @java.lang.Override
    public int hashCode() {
        return Objects.hash(
                this.voicemailDetectionTypes,
                this.enabled,
                this.machineDetectionTimeout,
                this.machineDetectionSpeechThreshold,
                this.machineDetectionSpeechEndThreshold,
                this.machineDetectionSilenceTimeout);
    }

    @java.lang.Override
    public String toString() {
        return ObjectMappers.stringify(this);
    }

    public static Builder builder() {
        return new Builder();
    }

    @JsonIgnoreProperties(ignoreUnknown = true)
    public static final class Builder {
        private Optional<List<TwilioVoicemailDetectionPlanVoicemailDetectionTypesItem>> voicemailDetectionTypes =
                Optional.empty();

        private Optional<Boolean> enabled = Optional.empty();

        private Optional<Double> machineDetectionTimeout = Optional.empty();

        private Optional<Double> machineDetectionSpeechThreshold = Optional.empty();

        private Optional<Double> machineDetectionSpeechEndThreshold = Optional.empty();

        private Optional<Double> machineDetectionSilenceTimeout = Optional.empty();

        @JsonAnySetter
        private Map<String, Object> additionalProperties = new HashMap<>();

        private Builder() {}

        public Builder from(TwilioVoicemailDetectionPlan other) {
            voicemailDetectionTypes(other.getVoicemailDetectionTypes());
            enabled(other.getEnabled());
            machineDetectionTimeout(other.getMachineDetectionTimeout());
            machineDetectionSpeechThreshold(other.getMachineDetectionSpeechThreshold());
            machineDetectionSpeechEndThreshold(other.getMachineDetectionSpeechEndThreshold());
            machineDetectionSilenceTimeout(other.getMachineDetectionSilenceTimeout());
            return this;
        }

        /**
         * <p>These are the AMD messages from Twilio that are considered as voicemail. Default is ['machine_end_beep', 'machine_end_silence'].</p>
         * <p>@default {Array} ['machine_end_beep', 'machine_end_silence']</p>
         */
        @JsonSetter(value = "voicemailDetectionTypes", nulls = Nulls.SKIP)
        public Builder voicemailDetectionTypes(
                Optional<List<TwilioVoicemailDetectionPlanVoicemailDetectionTypesItem>> voicemailDetectionTypes) {
            this.voicemailDetectionTypes = voicemailDetectionTypes;
            return this;
        }

        public Builder voicemailDetectionTypes(
                List<TwilioVoicemailDetectionPlanVoicemailDetectionTypesItem> voicemailDetectionTypes) {
            this.voicemailDetectionTypes = Optional.ofNullable(voicemailDetectionTypes);
            return this;
        }

        /**
         * <p>This sets whether the assistant should detect voicemail. Defaults to true.</p>
         * <p>@default true</p>
         */
        @JsonSetter(value = "enabled", nulls = Nulls.SKIP)
        public Builder enabled(Optional<Boolean> enabled) {
            this.enabled = enabled;
            return this;
        }

        public Builder enabled(Boolean enabled) {
            this.enabled = Optional.ofNullable(enabled);
            return this;
        }

        /**
         * <p>The number of seconds that Twilio should attempt to perform answering machine detection before timing out and returning AnsweredBy as unknown. Default is 30 seconds.</p>
         * <p>Increasing this value will provide the engine more time to make a determination. This can be useful when DetectMessageEnd is provided in the MachineDetection parameter and there is an expectation of long answering machine greetings that can exceed 30 seconds.</p>
         * <p>Decreasing this value will reduce the amount of time the engine has to make a determination. This can be particularly useful when the Enable option is provided in the MachineDetection parameter and you want to limit the time for initial detection.</p>
         * <p>Check the <a href="https://www.twilio.com/docs/voice/answering-machine-detection#optional-api-tuning-parameters">Twilio docs</a> for more info.</p>
         * <p>@default 30</p>
         */
        @JsonSetter(value = "machineDetectionTimeout", nulls = Nulls.SKIP)
        public Builder machineDetectionTimeout(Optional<Double> machineDetectionTimeout) {
            this.machineDetectionTimeout = machineDetectionTimeout;
            return this;
        }

        public Builder machineDetectionTimeout(Double machineDetectionTimeout) {
            this.machineDetectionTimeout = Optional.ofNullable(machineDetectionTimeout);
            return this;
        }

        /**
         * <p>The number of milliseconds that is used as the measuring stick for the length of the speech activity. Durations lower than this value will be interpreted as a human, longer as a machine. Default is 2400 milliseconds.</p>
         * <p>Increasing this value will reduce the chance of a False Machine (detected machine, actually human) for a long human greeting (e.g., a business greeting) but increase the time it takes to detect a machine.</p>
         * <p>Decreasing this value will reduce the chances of a False Human (detected human, actually machine) for short voicemail greetings. The value of this parameter may need to be reduced by more than 1000ms to detect very short voicemail greetings. A reduction of that significance can result in increased False Machine detections. Adjusting the MachineDetectionSpeechEndThreshold is likely the better approach for short voicemails. Decreasing MachineDetectionSpeechThreshold will also reduce the time it takes to detect a machine.</p>
         * <p>Check the <a href="https://www.twilio.com/docs/voice/answering-machine-detection#optional-api-tuning-parameters">Twilio docs</a> for more info.</p>
         * <p>@default 2400</p>
         */
        @JsonSetter(value = "machineDetectionSpeechThreshold", nulls = Nulls.SKIP)
        public Builder machineDetectionSpeechThreshold(Optional<Double> machineDetectionSpeechThreshold) {
            this.machineDetectionSpeechThreshold = machineDetectionSpeechThreshold;
            return this;
        }

        public Builder machineDetectionSpeechThreshold(Double machineDetectionSpeechThreshold) {
            this.machineDetectionSpeechThreshold = Optional.ofNullable(machineDetectionSpeechThreshold);
            return this;
        }

        /**
         * <p>The number of milliseconds of silence after speech activity at which point the speech activity is considered complete. Default is 1200 milliseconds.</p>
         * <p>Increasing this value will typically be used to better address the short voicemail greeting scenarios. For short voicemails, there is typically 1000-2000ms of audio followed by 1200-2400ms of silence and then additional audio before the beep. Increasing the MachineDetectionSpeechEndThreshold to ~2500ms will treat the 1200-2400ms of silence as a gap in the greeting but not the end of the greeting and will result in a machine detection. The downsides of such a change include:</p>
         * <ul>
         * <li>Increasing the delay for human detection by the amount you increase this parameter, e.g., a change of 1200ms to 2500ms increases human detection delay by 1300ms.</li>
         * <li>Cases where a human has two utterances separated by a period of silence (e.g. a &quot;Hello&quot;, then 2000ms of silence, and another &quot;Hello&quot;) may be interpreted as a machine.</li>
         * </ul>
         * <p>Decreasing this value will result in faster human detection. The consequence is that it can lead to increased False Human (detected human, actually machine) detections because a silence gap in a voicemail greeting (not necessarily just in short voicemail scenarios) can be incorrectly interpreted as the end of speech.</p>
         * <p>Check the <a href="https://www.twilio.com/docs/voice/answering-machine-detection#optional-api-tuning-parameters">Twilio docs</a> for more info.</p>
         * <p>@default 1200</p>
         */
        @JsonSetter(value = "machineDetectionSpeechEndThreshold", nulls = Nulls.SKIP)
        public Builder machineDetectionSpeechEndThreshold(Optional<Double> machineDetectionSpeechEndThreshold) {
            this.machineDetectionSpeechEndThreshold = machineDetectionSpeechEndThreshold;
            return this;
        }

        public Builder machineDetectionSpeechEndThreshold(Double machineDetectionSpeechEndThreshold) {
            this.machineDetectionSpeechEndThreshold = Optional.ofNullable(machineDetectionSpeechEndThreshold);
            return this;
        }

        /**
         * <p>The number of milliseconds of initial silence after which an unknown AnsweredBy result will be returned. Default is 5000 milliseconds.</p>
         * <p>Increasing this value will result in waiting for a longer period of initial silence before returning an 'unknown' AMD result.</p>
         * <p>Decreasing this value will result in waiting for a shorter period of initial silence before returning an 'unknown' AMD result.</p>
         * <p>Check the <a href="https://www.twilio.com/docs/voice/answering-machine-detection#optional-api-tuning-parameters">Twilio docs</a> for more info.</p>
         * <p>@default 5000</p>
         */
        @JsonSetter(value = "machineDetectionSilenceTimeout", nulls = Nulls.SKIP)
        public Builder machineDetectionSilenceTimeout(Optional<Double> machineDetectionSilenceTimeout) {
            this.machineDetectionSilenceTimeout = machineDetectionSilenceTimeout;
            return this;
        }

        public Builder machineDetectionSilenceTimeout(Double machineDetectionSilenceTimeout) {
            this.machineDetectionSilenceTimeout = Optional.ofNullable(machineDetectionSilenceTimeout);
            return this;
        }

        public TwilioVoicemailDetectionPlan build() {
            return new TwilioVoicemailDetectionPlan(
                    voicemailDetectionTypes,
                    enabled,
                    machineDetectionTimeout,
                    machineDetectionSpeechThreshold,
                    machineDetectionSpeechEndThreshold,
                    machineDetectionSilenceTimeout,
                    additionalProperties);
        }
    }
}
